'use strict';

function _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }

var isekai = _interopDefault(require('isekai'));
var express = _interopDefault(require('express'));
var helmet = _interopDefault(require('helmet'));
var fs = _interopDefault(require('fs'));
var commonmark = _interopDefault(require('commonmark'));
var chokidar = _interopDefault(require('chokidar'));
var niceware = _interopDefault(require('niceware'));
var child_process = require('child_process');

var f0 = ({ 
    HTTP,
    SET
}) => {
    SET({
        HTTP: { 
            ...HTTP,
            API: HTTP.use(express.json())
        }
    });
};

var version = "1.0.4";

const last_restart = new Date();
const power_words = (target) => target.
    replace(/(\[.[^\]\[]*\])/ug, `<span class='power_word'>$1</span>`).
    replace(`\${version}`, version).
    replace(`\${server_restart}`, `${last_restart.toLocaleString()} PDT`);

const make_data = ([ markdown, template ]) => {
    const reader = new commonmark.Parser();
    const writer = new commonmark.HtmlRenderer();
    
    const md_data = fs.readFileSync(markdown, `utf-8`);
    const html = writer.render(reader.parse(md_data));
    
    const tp_data = fs.readFileSync(template, `utf-8`);
    
    return power_words(tp_data.replace(`<markdown/>`, html));
};

var f1 = ({
    HTTP,
}) => {
    const {
        MARKDOWN = []
    } = HTTP;

    Object.entries(MARKDOWN).
        forEach(([ 
            path, {
                markdown,
                template
            } 
        ]) => {
            console.log(`[HTTP.MARKDOWN] ${markdown} :> ${path}`);
            const paths = [ `./DATA/${markdown}`, `./DATA/${template}` ];

            let data = make_data(paths);

            chokidar.watch(paths, {
                usePolling: true
            }).
                on(`change`, () => {
                    data = make_data(paths);
                    console.log(`[HTTP.MARKDOWN] UPDATED ${markdown} :> ${path}`);
                });

            HTTP.get(path, (req, res) => {
                res.send(data);
            });
        });
};

var f2 = ({
    HTTP
}) => {
    const {
        REPLY = {}
    } = HTTP;

    Object.entries(REPLY).
        forEach(([ path, response ]) => HTTP.get(path, (res) => res.send(response)));
};

var f3 = ({
    HTTP 
}) => {
    const {
        STATIC = {}
    } = HTTP;

    Object.entries(STATIC).
        forEach(([ items_path, http_path ]) => {
            console.log(`[HTTP.STATIC] ${items_path} :> ${http_path}`);
            HTTP.use(http_path, express.static(`./DATA/${items_path}`, {
                dotfiles: `allow`
            }));
        });
};

const res = {};
res["API"] = f0;
res["MD"] = f1;
res["REPLY"] = f2;
res["STATIC"] = f3;

// for express nto to send stack traces
process.env.NODE_ENV = `production`;

var HTTP = ({
    EQUIP
}) => EQUIP({
    HTTP: ({
        HTTP: {
            port = 8080
        },
        SET,
    }) => {
        const app = express();
        app.use(helmet());

        app.listen(port, () => {
            console.log(`[HTTP] Listening on http://localhost:${port}`);
        });

        SET({
            HTTP: app
        });
    },    
    ...res
});

var ZALGO = ({
    HTTP: {
        API,
    },
    SET
}) => {
    const ZALGOS = new Map(Object.entries({
        echo: () => ({
            message: `echo` 
        })
    }));

    const set_zalgo = ({
        zalgo,
        strength = 12,
        handler
    }) => {
        zalgo = zalgo || niceware.generatePassphrase(strength).
            join(` `);

        ZALGOS.set(zalgo, handler);
        
        return zalgo;
    };

    const fire = ({
        zalgo,
        data = {}
    }) => {
        if(!ZALGOS.has(zalgo)) {
            return;
        }

        return ZALGOS.get(zalgo)(data);
    };

    const remove = (zalgo) => {
        ZALGOS.delete(zalgo);
    };

    SET({
        ZALGO: Object.assign(set_zalgo, {
            remove,
            fire,
        })
    });

    API.post(`/zalgo`, ({ body }, res) => {
        res.setHeader(`Content-Type`, `application/json`);

        res.end(JSON.stringify(fire(body) || {}));
    });
};

const do_exec = (cmd) => {
    console.log(`DOING `, cmd);
    const child = child_process.exec(cmd);

    return new Promise(((resolve, reject) => {
        child.addListener(`error`, reject);
        child.addListener(`exit`, resolve);
    }));
};

const runner = async (...tasks) => {
    const cmd = tasks.shift();
    if(!cmd) {
        return;
    }

    await do_exec(cmd);
    
    return runner(...tasks);
};

var ADMIN = ({
    ZALGO,
    ADMIN: {
        zalgo,
    }
}) => {
    const admin_zalgo = ZALGO({
        zalgo,
        strength: 18,
        handler: () => {
            runner(`git pull origin master`, `npm install`, `npm run build`).
                then(() => {
                    process.exit();
                });
            
            return {
                restart: true
            };
        }
    });

    if(!zalgo) {
        return console.log(`[ADMIN] ZALGO: ${admin_zalgo}`);
    } 
        
    console.log(`[ADMIN] STARTED`);
};

isekai.SET({"NODE":{},"HTTP":{"port":8080,"STATIC":{"public":"/"}},"LOG":{"greetings":"Hello, serving ./DATA/public on http://localhost:8080"},"ZALGO":{},"ADMIN":{"zalgo":"restart"}});

isekai.EQUIP({
    HTTP,
    ZALGO,
    ADMIN,
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGVsbG8td29ybGQuTk9ERS5qcyIsInNvdXJjZXMiOlsiLi4vU0tJTExTL0hUVFAvU0tJTExTL0FQSS5qcyIsIi4uL1NLSUxMUy9IVFRQL1NLSUxMUy9NRC5qcyIsIi4uL1NLSUxMUy9IVFRQL1NLSUxMUy9SRVBMWS5qcyIsIi4uL1NLSUxMUy9IVFRQL1NLSUxMUy9TVEFUSUMuanMiLCIuLi84NTRkMDVmNDhkODU2N2ZkMDlmZjkwOTMyYzFiZTE5NSIsIi4uL1NLSUxMUy9IVFRQL25vZGUuanMiLCIuLi9TS0lMTFMvWkFMR08vbm9kZS5qcyIsIi4uL1NLSUxMUy9BRE1JTi9ydW5uZXIuanMiLCIuLi9TS0lMTFMvQURNSU4vbm9kZS5qcyIsImhlbGxvLXdvcmxkLmVudHJ5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlxyXG5pbXBvcnQgZXhwcmVzcyBmcm9tIFwiZXhwcmVzc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgKHsgXHJcbiAgICBIVFRQLFxyXG4gICAgU0VUXHJcbn0pID0+IHtcclxuICAgIFNFVCh7XHJcbiAgICAgICAgSFRUUDogeyBcclxuICAgICAgICAgICAgLi4uSFRUUCxcclxuICAgICAgICAgICAgQVBJOiBIVFRQLnVzZShleHByZXNzLmpzb24oKSlcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufTtcclxuIiwiaW1wb3J0IGZzIGZyb20gXCJmc1wiO1xyXG5pbXBvcnQgY29tbW9ubWFyayBmcm9tIFwiY29tbW9ubWFya1wiO1xyXG5pbXBvcnQgY2hva2lkYXIgZnJvbSBcImNob2tpZGFyXCI7XHJcblxyXG5pbXBvcnQgeyB2ZXJzaW9uIH0gZnJvbSBcIi4uLy4uLy4uL3BhY2thZ2UuanNvblwiO1xyXG5cclxuY29uc3QgbGFzdF9yZXN0YXJ0ID0gbmV3IERhdGUoKTtcclxuY29uc3QgcG93ZXJfd29yZHMgPSAodGFyZ2V0KSA9PiB0YXJnZXQuXHJcbiAgICByZXBsYWNlKC8oXFxbLlteXFxdXFxbXSpcXF0pL3VnLCBgPHNwYW4gY2xhc3M9J3Bvd2VyX3dvcmQnPiQxPC9zcGFuPmApLlxyXG4gICAgcmVwbGFjZShgXFwke3ZlcnNpb259YCwgdmVyc2lvbikuXHJcbiAgICByZXBsYWNlKGBcXCR7c2VydmVyX3Jlc3RhcnR9YCwgYCR7bGFzdF9yZXN0YXJ0LnRvTG9jYWxlU3RyaW5nKCl9IFBEVGApO1xyXG5cclxuY29uc3QgbWFrZV9kYXRhID0gKFsgbWFya2Rvd24sIHRlbXBsYXRlIF0pID0+IHtcclxuICAgIGNvbnN0IHJlYWRlciA9IG5ldyBjb21tb25tYXJrLlBhcnNlcigpO1xyXG4gICAgY29uc3Qgd3JpdGVyID0gbmV3IGNvbW1vbm1hcmsuSHRtbFJlbmRlcmVyKCk7XHJcbiAgICBcclxuICAgIGNvbnN0IG1kX2RhdGEgPSBmcy5yZWFkRmlsZVN5bmMobWFya2Rvd24sIGB1dGYtOGApO1xyXG4gICAgY29uc3QgaHRtbCA9IHdyaXRlci5yZW5kZXIocmVhZGVyLnBhcnNlKG1kX2RhdGEpKTtcclxuICAgIFxyXG4gICAgY29uc3QgdHBfZGF0YSA9IGZzLnJlYWRGaWxlU3luYyh0ZW1wbGF0ZSwgYHV0Zi04YCk7XHJcbiAgICBcclxuICAgIHJldHVybiBwb3dlcl93b3Jkcyh0cF9kYXRhLnJlcGxhY2UoYDxtYXJrZG93bi8+YCwgaHRtbCkpO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgKHtcclxuICAgIEhUVFAsXHJcbn0pID0+IHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgICBNQVJLRE9XTiA9IFtdXHJcbiAgICB9ID0gSFRUUDtcclxuXHJcbiAgICBPYmplY3QuZW50cmllcyhNQVJLRE9XTikuXHJcbiAgICAgICAgZm9yRWFjaCgoWyBcclxuICAgICAgICAgICAgcGF0aCwge1xyXG4gICAgICAgICAgICAgICAgbWFya2Rvd24sXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVxyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgIF0pID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFtIVFRQLk1BUktET1dOXSAke21hcmtkb3dufSA6PiAke3BhdGh9YCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhdGhzID0gWyBgLi9EQVRBLyR7bWFya2Rvd259YCwgYC4vREFUQS8ke3RlbXBsYXRlfWAgXTtcclxuXHJcbiAgICAgICAgICAgIGxldCBkYXRhID0gbWFrZV9kYXRhKHBhdGhzKTtcclxuXHJcbiAgICAgICAgICAgIGNob2tpZGFyLndhdGNoKHBhdGhzLCB7XHJcbiAgICAgICAgICAgICAgICB1c2VQb2xsaW5nOiB0cnVlXHJcbiAgICAgICAgICAgIH0pLlxyXG4gICAgICAgICAgICAgICAgb24oYGNoYW5nZWAsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhID0gbWFrZV9kYXRhKHBhdGhzKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW0hUVFAuTUFSS0RPV05dIFVQREFURUQgJHttYXJrZG93bn0gOj4gJHtwYXRofWApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBIVFRQLmdldChwYXRoLCAocmVxLCByZXMpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlcy5zZW5kKGRhdGEpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxufTtcclxuXHJcbiIsImV4cG9ydCBkZWZhdWx0ICh7XHJcbiAgICBIVFRQXHJcbn0pID0+IHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgICBSRVBMWSA9IHt9XHJcbiAgICB9ID0gSFRUUDtcclxuXHJcbiAgICBPYmplY3QuZW50cmllcyhSRVBMWSkuXHJcbiAgICAgICAgZm9yRWFjaCgoWyBwYXRoLCByZXNwb25zZSBdKSA9PiBIVFRQLmdldChwYXRoLCAocmVzKSA9PiByZXMuc2VuZChyZXNwb25zZSkpKTtcclxufTsiLCJpbXBvcnQgZXhwcmVzcyBmcm9tIFwiZXhwcmVzc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgKHtcclxuICAgIEhUVFAgXHJcbn0pID0+IHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgICBTVEFUSUMgPSB7fVxyXG4gICAgfSA9IEhUVFA7XHJcblxyXG4gICAgT2JqZWN0LmVudHJpZXMoU1RBVElDKS5cclxuICAgICAgICBmb3JFYWNoKChbIGl0ZW1zX3BhdGgsIGh0dHBfcGF0aCBdKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbSFRUUC5TVEFUSUNdICR7aXRlbXNfcGF0aH0gOj4gJHtodHRwX3BhdGh9YCk7XHJcbiAgICAgICAgICAgIEhUVFAudXNlKGh0dHBfcGF0aCwgZXhwcmVzcy5zdGF0aWMoYC4vREFUQS8ke2l0ZW1zX3BhdGh9YCwge1xyXG4gICAgICAgICAgICAgICAgZG90ZmlsZXM6IGBhbGxvd2BcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH0pO1xyXG59O1xyXG5cclxuIiwiY29uc3QgcmVzID0ge307XG5pbXBvcnQgZjAgZnJvbSBcIi9Vc2Vycy9HYW1lcy9Qcm9qZWN0cy9pc2VrYWktY29yZS9TS0lMTFMvSFRUUC9TS0lMTFMvQVBJLmpzXCI7XG5yZXNbXCJBUElcIl0gPSBmMDtcbmltcG9ydCBmMSBmcm9tIFwiL1VzZXJzL0dhbWVzL1Byb2plY3RzL2lzZWthaS1jb3JlL1NLSUxMUy9IVFRQL1NLSUxMUy9NRC5qc1wiO1xucmVzW1wiTURcIl0gPSBmMTtcbmltcG9ydCBmMiBmcm9tIFwiL1VzZXJzL0dhbWVzL1Byb2plY3RzL2lzZWthaS1jb3JlL1NLSUxMUy9IVFRQL1NLSUxMUy9SRVBMWS5qc1wiO1xucmVzW1wiUkVQTFlcIl0gPSBmMjtcbmltcG9ydCBmMyBmcm9tIFwiL1VzZXJzL0dhbWVzL1Byb2plY3RzL2lzZWthaS1jb3JlL1NLSUxMUy9IVFRQL1NLSUxMUy9TVEFUSUMuanNcIjtcbnJlc1tcIlNUQVRJQ1wiXSA9IGYzO1xuZXhwb3J0IGRlZmF1bHQgcmVzOyIsImltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XHJcbmltcG9ydCBoZWxtZXQgZnJvbSBcImhlbG1ldFwiO1xyXG5cclxuaW1wb3J0IHN1Yl9za2lsbHMgZnJvbSBcIi4vU0tJTExTLyouanNcIjtcclxuXHJcbi8vIGZvciBleHByZXNzIG50byB0byBzZW5kIHN0YWNrIHRyYWNlc1xyXG5wcm9jZXNzLmVudi5OT0RFX0VOViA9IGBwcm9kdWN0aW9uYDtcclxuXHJcbmV4cG9ydCBkZWZhdWx0ICh7XHJcbiAgICBFUVVJUFxyXG59KSA9PiBFUVVJUCh7XHJcbiAgICBIVFRQOiAoe1xyXG4gICAgICAgIEhUVFA6IHtcclxuICAgICAgICAgICAgcG9ydCA9IDgwODBcclxuICAgICAgICB9LFxyXG4gICAgICAgIFNFVCxcclxuICAgIH0pID0+IHtcclxuICAgICAgICBjb25zdCBhcHAgPSBleHByZXNzKCk7XHJcbiAgICAgICAgYXBwLnVzZShoZWxtZXQoKSk7XHJcblxyXG4gICAgICAgIGFwcC5saXN0ZW4ocG9ydCwgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgW0hUVFBdIExpc3RlbmluZyBvbiBodHRwOi8vbG9jYWxob3N0OiR7cG9ydH1gKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgU0VUKHtcclxuICAgICAgICAgICAgSFRUUDogYXBwXHJcbiAgICAgICAgfSk7XHJcbiAgICB9LCAgICBcclxuICAgIC4uLnN1Yl9za2lsbHNcclxufSk7XHJcbiIsImltcG9ydCBuaWNld2FyZSBmcm9tIFwibmljZXdhcmVcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0ICh7XHJcbiAgICBIVFRQOiB7XHJcbiAgICAgICAgQVBJLFxyXG4gICAgfSxcclxuICAgIFNFVFxyXG59KSA9PiB7XHJcbiAgICBjb25zdCBaQUxHT1MgPSBuZXcgTWFwKE9iamVjdC5lbnRyaWVzKHtcclxuICAgICAgICBlY2hvOiAoKSA9PiAoe1xyXG4gICAgICAgICAgICBtZXNzYWdlOiBgZWNob2AgXHJcbiAgICAgICAgfSlcclxuICAgIH0pKTtcclxuXHJcbiAgICBjb25zdCBzZXRfemFsZ28gPSAoe1xyXG4gICAgICAgIHphbGdvLFxyXG4gICAgICAgIHN0cmVuZ3RoID0gMTIsXHJcbiAgICAgICAgaGFuZGxlclxyXG4gICAgfSkgPT4ge1xyXG4gICAgICAgIHphbGdvID0gemFsZ28gfHwgbmljZXdhcmUuZ2VuZXJhdGVQYXNzcGhyYXNlKHN0cmVuZ3RoKS5cclxuICAgICAgICAgICAgam9pbihgIGApO1xyXG5cclxuICAgICAgICBaQUxHT1Muc2V0KHphbGdvLCBoYW5kbGVyKTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gemFsZ287XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGZpcmUgPSAoe1xyXG4gICAgICAgIHphbGdvLFxyXG4gICAgICAgIGRhdGEgPSB7fVxyXG4gICAgfSkgPT4ge1xyXG4gICAgICAgIGlmKCFaQUxHT1MuaGFzKHphbGdvKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gWkFMR09TLmdldCh6YWxnbykoZGF0YSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHJlbW92ZSA9ICh6YWxnbykgPT4ge1xyXG4gICAgICAgIFpBTEdPUy5kZWxldGUoemFsZ28pO1xyXG4gICAgfTtcclxuXHJcbiAgICBTRVQoe1xyXG4gICAgICAgIFpBTEdPOiBPYmplY3QuYXNzaWduKHNldF96YWxnbywge1xyXG4gICAgICAgICAgICByZW1vdmUsXHJcbiAgICAgICAgICAgIGZpcmUsXHJcbiAgICAgICAgfSlcclxuICAgIH0pO1xyXG5cclxuICAgIEFQSS5wb3N0KGAvemFsZ29gLCAoeyBib2R5IH0sIHJlcykgPT4ge1xyXG4gICAgICAgIHJlcy5zZXRIZWFkZXIoYENvbnRlbnQtVHlwZWAsIGBhcHBsaWNhdGlvbi9qc29uYCk7XHJcblxyXG4gICAgICAgIHJlcy5lbmQoSlNPTi5zdHJpbmdpZnkoZmlyZShib2R5KSB8fCB7fSkpO1xyXG4gICAgfSk7XHJcbn07IiwiaW1wb3J0IHsgZXhlYyB9IGZyb20gXCJjaGlsZF9wcm9jZXNzXCI7XHJcblxyXG5jb25zdCBkb19leGVjID0gKGNtZCkgPT4ge1xyXG4gICAgY29uc29sZS5sb2coYERPSU5HIGAsIGNtZCk7XHJcbiAgICBjb25zdCBjaGlsZCA9IGV4ZWMoY21kKTtcclxuXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICBjaGlsZC5hZGRMaXN0ZW5lcihgZXJyb3JgLCByZWplY3QpO1xyXG4gICAgICAgIGNoaWxkLmFkZExpc3RlbmVyKGBleGl0YCwgcmVzb2x2ZSk7XHJcbiAgICB9KSk7XHJcbn07XHJcblxyXG5jb25zdCBydW5uZXIgPSBhc3luYyAoLi4udGFza3MpID0+IHtcclxuICAgIGNvbnN0IGNtZCA9IHRhc2tzLnNoaWZ0KCk7XHJcbiAgICBpZighY21kKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGF3YWl0IGRvX2V4ZWMoY21kKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHJ1bm5lciguLi50YXNrcyk7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBydW5uZXI7XHJcbiIsImltcG9ydCBydW5uZXIgZnJvbSBcIi4vcnVubmVyLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCAoe1xyXG4gICAgWkFMR08sXHJcbiAgICBBRE1JTjoge1xyXG4gICAgICAgIHphbGdvLFxyXG4gICAgfVxyXG59KSA9PiB7XHJcbiAgICBjb25zdCBhZG1pbl96YWxnbyA9IFpBTEdPKHtcclxuICAgICAgICB6YWxnbyxcclxuICAgICAgICBzdHJlbmd0aDogMTgsXHJcbiAgICAgICAgaGFuZGxlcjogKCkgPT4ge1xyXG4gICAgICAgICAgICBydW5uZXIoYGdpdCBwdWxsIG9yaWdpbiBtYXN0ZXJgLCBgbnBtIGluc3RhbGxgLCBgbnBtIHJ1biBidWlsZGApLlxyXG4gICAgICAgICAgICAgICAgdGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzcy5leGl0KCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICByZXN0YXJ0OiB0cnVlXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYoIXphbGdvKSB7XHJcbiAgICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKGBbQURNSU5dIFpBTEdPOiAke2FkbWluX3phbGdvfWApO1xyXG4gICAgfSBcclxuICAgICAgICBcclxuICAgIGNvbnNvbGUubG9nKGBbQURNSU5dIFNUQVJURURgKTtcclxufTtcclxuIiwiaW1wb3J0IGlzZWthaSBmcm9tIFwiaXNla2FpXCI7XHJcbmlzZWthaS5TRVQoe1wiTk9ERVwiOnt9LFwiSFRUUFwiOntcInBvcnRcIjo4MDgwLFwiU1RBVElDXCI6e1wicHVibGljXCI6XCIvXCJ9fSxcIkxPR1wiOntcImdyZWV0aW5nc1wiOlwiSGVsbG8sIHNlcnZpbmcgLi9EQVRBL3B1YmxpYyBvbiBodHRwOi8vbG9jYWxob3N0OjgwODBcIn0sXCJaQUxHT1wiOnt9LFwiQURNSU5cIjp7XCJ6YWxnb1wiOlwicmVzdGFydFwifX0pO1xyXG5cclxuaW1wb3J0IEhUVFAgZnJvbSBcIi4uL1NLSUxMUy9IVFRQL25vZGUuanNcIjtcclxuaW1wb3J0IFpBTEdPIGZyb20gXCIuLi9TS0lMTFMvWkFMR08vbm9kZS5qc1wiO1xyXG5pbXBvcnQgQURNSU4gZnJvbSBcIi4uL1NLSUxMUy9BRE1JTi9ub2RlLmpzXCI7XHJcblxuaXNla2FpLkVRVUlQKHtcclxuICAgIEhUVFAsXHJcbiAgICBaQUxHTyxcclxuICAgIEFETUlOLFxyXG59KTtcclxuIl0sIm5hbWVzIjpbInN1Yl9za2lsbHMiLCJleGVjIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBR0EsU0FBZSxDQUFDO0lBQ1osSUFBSTtJQUNKLEdBQUc7Q0FDTixLQUFLO0lBQ0YsR0FBRyxDQUFDO1FBQ0EsSUFBSSxFQUFFO1lBQ0YsR0FBRyxJQUFJO1lBQ1As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
