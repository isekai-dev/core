'use strict';

function _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }

var isekai = _interopDefault(require('isekai'));
var express = _interopDefault(require('express'));
var greenlock = _interopDefault(require('greenlock-express'));
var http = _interopDefault(require('http'));
var fs = _interopDefault(require('fs'));
var commonmark = _interopDefault(require('commonmark'));
var chokidar = _interopDefault(require('chokidar'));

var f0 = ({ 
    HTTP,
    SET
}) => {
    SET({
        HTTP: { 
            ...HTTP,
            API: HTTP.use(express.json())
        }
    });
};

var version = "0.0.4";

const last_restart = new Date();
const power_words = (target) => 
    target.
        replace(/(\[.[^\]\[]*\])/ug, `<span class='power_word'>$1</span>`).
        replace(`\${version}`, version).
        replace(`\${server_restart}`, `${last_restart.toLocaleString()} PDT`);

const make_data = ([ markdown, template ]) => {
    const reader = new commonmark.Parser();
    const writer = new commonmark.HtmlRenderer();
    
    const md_data = fs.readFileSync(markdown, `utf-8`);
    const html = writer.render(reader.parse(md_data));
    
    const tp_data = fs.readFileSync(template, `utf-8`);
    
    return power_words(tp_data.replace(`<markdown/>`, html));
};

var f1 = ({
    HTTP,
}) => {
    const {
        MARKDOWN = []
    } = HTTP;

    Object.entries(MARKDOWN).
        forEach(([ 
            path, {
                markdown,
                template
            } 
        ]) => {
            console.log(`[HTTP.MARKDOWN] ${markdown} :> ${path}`);
            const paths = [ `./DATA/${markdown}`, `./DATA/${template}` ];

            let data = make_data(paths);

            chokidar.watch(paths, {
                usePolling: true
            }).
                on(`change`, () => {
                    data = make_data(paths);
                    console.log(`[HTTP.MARKDOWN] UPDATED ${markdown} :> ${path}`);
                });

            HTTP.get(path, (req, res) => {
                res.send(data);
            });
        });
};

var f2 = ({
    HTTP
}) => {
    const {
        REPLY = {}
    } = HTTP;

    Object.entries(REPLY).
        forEach(([ path, response ]) => 
            HTTP.get(path, (res) => 
                res.send(response))
        );
};

var f3 = ({
    HTTP 
}) => {
    const {
        STATIC = {}
    } = HTTP;

    Object.entries(STATIC).
        forEach(([ items_path, http_path ]) => {
            console.log(`[HTTP.STATIC] ${items_path} :> ${http_path}`);
            HTTP.use(http_path, express.static(`./DATA/${items_path}`, {
                dotfiles: `allow`
            }));
        });
};

const res = {};
res["API"] = f0;
res["MD"] = f1;
res["REPLY"] = f2;
res["STATIC"] = f3;

var HTTP = ({
    EQUIP
}) => 
    EQUIP({
        HTTP: ({
            HTTP: {
                ssl = false,
                port = 8080
            },
            SET,
        }) => {
            const app = express();

            if(ssl) {
                const {
                    agreeTos,
                    email,
                    approvedDomains,
                    configDir = `~/.config/ssl`,
                    communityMember = false,
                    telemetry = false,
                    ssl_port = 443,
                    redirect = 80
                } = ssl;
        
                if(!agreeTos || !email || !approvedDomains) {
                    const not_filled = Object.entries({ 
                        agreeTos,
                        email,
                        approvedDomains 
                    }).
                        filter(([ , value ]) => 
                            value).
                        map((key) => 
                            key).
                        join(` - `);
        
                    throw new Error(`You've enabled SSL but not configured SSL: ${not_filled}`);
                }
            
                greenlock.create({
                    telemetry,
                    agreeTos,
                    email,
                    configDir,
                    communityMember,
                    approvedDomains,
                    app,
                }).
                    listen(ssl_port, () => {
                        console.log(`[HTTPS]`);
                        console.log(`BIFROST SECURED`);
                    });
        
                
                if(redirect) {
                    const redirectApp = express();
            
                    console.log(`Redirecting to HTTP to HTTPS`);
        
                    redirectApp.all(`*`, (req, res) => {  
                        res.redirect(`https://${req.headers.host}${req.url}`);
                        res.end();
                    });
        
                    http.createServer(redirectApp).
                        listen(redirect);
        
                }
        
            } else {
                app.listen(port, () => {
                    console.log(`⚠️[HTTP]⚠️`);
                    console.log(`BIFROST INSECURE`);
                    console.log(`Listening on http://localhost:8080`);
                });
            }
            
            SET({
                HTTP: app
            });
        },    
        ...res
    });

isekai.SET({"NODE":{},"HTTP":{"port":8080,"STATIC":{"public":"/"}},"LOG":{"greetings":"Hello, serving ./DATA/public on http://localhost:8080"}});

isekai.EQUIP({
    HTTP,
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGVsbG8td29ybGQuTk9ERS5qcyIsInNvdXJjZXMiOlsiLi4vbm9kZV9tb2R1bGVzL2lzZWthaS9TS0lMTFMvSFRUUC9TS0lMTFMvQVBJLmpzIiwiLi4vbm9kZV9tb2R1bGVzL2lzZWthaS9TS0lMTFMvSFRUUC9TS0lMTFMvTUQuanMiLCIuLi9ub2RlX21vZHVsZXMvaXNla2FpL1NLSUxMUy9IVFRQL1NLSUxMUy9SRVBMWS5qcyIsIi4uL25vZGVfbW9kdWxlcy9pc2VrYWkvU0tJTExTL0hUVFAvU0tJTExTL1NUQVRJQy5qcyIsIi4uL2JmZDRlNzE1MjgwNzU1YjVkMzdiZWI5MDY0ZTJiNDRkIiwiLi4vbm9kZV9tb2R1bGVzL2lzZWthaS9TS0lMTFMvSFRUUC9ub2RlLmpzIiwiaGVsbG8td29ybGQuZW50cnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXHJcbmltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCAoeyBcclxuICAgIEhUVFAsXHJcbiAgICBTRVRcclxufSkgPT4ge1xyXG4gICAgU0VUKHtcclxuICAgICAgICBIVFRQOiB7IFxyXG4gICAgICAgICAgICAuLi5IVFRQLFxyXG4gICAgICAgICAgICBBUEk6IEhUVFAudXNlKGV4cHJlc3MuanNvbigpKVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59O1xyXG4iLCJpbXBvcnQgZnMgZnJvbSBcImZzXCI7XHJcbmltcG9ydCBjb21tb25tYXJrIGZyb20gXCJjb21tb25tYXJrXCI7XHJcbmltcG9ydCBjaG9raWRhciBmcm9tIFwiY2hva2lkYXJcIjtcclxuXHJcbmltcG9ydCB7IHZlcnNpb24gfSBmcm9tIFwiLi4vLi4vLi4vcGFja2FnZS5qc29uXCI7XHJcblxyXG5jb25zdCBsYXN0X3Jlc3RhcnQgPSBuZXcgRGF0ZSgpO1xyXG5jb25zdCBwb3dlcl93b3JkcyA9ICh0YXJnZXQpID0+IFxyXG4gICAgdGFyZ2V0LlxyXG4gICAgICAgIHJlcGxhY2UoLyhcXFsuW15cXF1cXFtdKlxcXSkvdWcsIGA8c3BhbiBjbGFzcz0ncG93ZXJfd29yZCc+JDE8L3NwYW4+YCkuXHJcbiAgICAgICAgcmVwbGFjZShgXFwke3ZlcnNpb259YCwgdmVyc2lvbikuXHJcbiAgICAgICAgcmVwbGFjZShgXFwke3NlcnZlcl9yZXN0YXJ0fWAsIGAke2xhc3RfcmVzdGFydC50b0xvY2FsZVN0cmluZygpfSBQRFRgKTtcclxuXHJcbmNvbnN0IG1ha2VfZGF0YSA9IChbIG1hcmtkb3duLCB0ZW1wbGF0ZSBdKSA9PiB7XHJcbiAgICBjb25zdCByZWFkZXIgPSBuZXcgY29tbW9ubWFyay5QYXJzZXIoKTtcclxuICAgIGNvbnN0IHdyaXRlciA9IG5ldyBjb21tb25tYXJrLkh0bWxSZW5kZXJlcigpO1xyXG4gICAgXHJcbiAgICBjb25zdCBtZF9kYXRhID0gZnMucmVhZEZpbGVTeW5jKG1hcmtkb3duLCBgdXRmLThgKTtcclxuICAgIGNvbnN0IGh0bWwgPSB3cml0ZXIucmVuZGVyKHJlYWRlci5wYXJzZShtZF9kYXRhKSk7XHJcbiAgICBcclxuICAgIGNvbnN0IHRwX2RhdGEgPSBmcy5yZWFkRmlsZVN5bmModGVtcGxhdGUsIGB1dGYtOGApO1xyXG4gICAgXHJcbiAgICByZXR1cm4gcG93ZXJfd29yZHModHBfZGF0YS5yZXBsYWNlKGA8bWFya2Rvd24vPmAsIGh0bWwpKTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0ICh7XHJcbiAgICBIVFRQLFxyXG59KSA9PiB7XHJcbiAgICBjb25zdCB7XHJcbiAgICAgICAgTUFSS0RPV04gPSBbXVxyXG4gICAgfSA9IEhUVFA7XHJcblxyXG4gICAgT2JqZWN0LmVudHJpZXMoTUFSS0RPV04pLlxyXG4gICAgICAgIGZvckVhY2goKFsgXHJcbiAgICAgICAgICAgIHBhdGgsIHtcclxuICAgICAgICAgICAgICAgIG1hcmtkb3duLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVcclxuICAgICAgICAgICAgfSBcclxuICAgICAgICBdKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbSFRUUC5NQVJLRE9XTl0gJHttYXJrZG93bn0gOj4gJHtwYXRofWApO1xyXG4gICAgICAgICAgICBjb25zdCBwYXRocyA9IFsgYC4vREFUQS8ke21hcmtkb3dufWAsIGAuL0RBVEEvJHt0ZW1wbGF0ZX1gIF07XHJcblxyXG4gICAgICAgICAgICBsZXQgZGF0YSA9IG1ha2VfZGF0YShwYXRocyk7XHJcblxyXG4gICAgICAgICAgICBjaG9raWRhci53YXRjaChwYXRocywge1xyXG4gICAgICAgICAgICAgICAgdXNlUG9sbGluZzogdHJ1ZVxyXG4gICAgICAgICAgICB9KS5cclxuICAgICAgICAgICAgICAgIG9uKGBjaGFuZ2VgLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IG1ha2VfZGF0YShwYXRocyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFtIVFRQLk1BUktET1dOXSBVUERBVEVEICR7bWFya2Rvd259IDo+ICR7cGF0aH1gKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgSFRUUC5nZXQocGF0aCwgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXMuc2VuZChkYXRhKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbn07XHJcblxyXG4iLCJleHBvcnQgZGVmYXVsdCAoe1xyXG4gICAgSFRUUFxyXG59KSA9PiB7XHJcbiAgICBjb25zdCB7XHJcbiAgICAgICAgUkVQTFkgPSB7fVxyXG4gICAgfSA9IEhUVFA7XHJcblxyXG4gICAgT2JqZWN0LmVudHJpZXMoUkVQTFkpLlxyXG4gICAgICAgIGZvckVhY2goKFsgcGF0aCwgcmVzcG9uc2UgXSkgPT4gXHJcbiAgICAgICAgICAgIEhUVFAuZ2V0KHBhdGgsIChyZXMpID0+IFxyXG4gICAgICAgICAgICAgICAgcmVzLnNlbmQocmVzcG9uc2UpKVxyXG4gICAgICAgICk7XHJcbn07IiwiaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0ICh7XHJcbiAgICBIVFRQIFxyXG59KSA9PiB7XHJcbiAgICBjb25zdCB7XHJcbiAgICAgICAgU1RBVElDID0ge31cclxuICAgIH0gPSBIVFRQO1xyXG5cclxuICAgIE9iamVjdC5lbnRyaWVzKFNUQVRJQykuXHJcbiAgICAgICAgZm9yRWFjaCgoWyBpdGVtc19wYXRoLCBodHRwX3BhdGggXSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgW0hUVFAuU1RBVElDXSAke2l0ZW1zX3BhdGh9IDo+ICR7aHR0cF9wYXRofWApO1xyXG4gICAgICAgICAgICBIVFRQLnVzZShodHRwX3BhdGgsIGV4cHJlc3Muc3RhdGljKGAuL0RBVEEvJHtpdGVtc19wYXRofWAsIHtcclxuICAgICAgICAgICAgICAgIGRvdGZpbGVzOiBgYWxsb3dgXHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9KTtcclxufTtcclxuXHJcbiIsImNvbnN0IHJlcyA9IHt9O1xuaW1wb3J0IGYwIGZyb20gXCIvVXNlcnMvR2FtZXMvUHJvamVjdHMvaXNla2FpLWNvcmUvbm9kZV9tb2R1bGVzL2lzZWthaS9TS0lMTFMvSFRUUC9TS0lMTFMvQVBJLmpzXCI7XG5yZXNbXCJBUElcIl0gPSBmMDtcbmltcG9ydCBmMSBmcm9tIFwiL1VzZXJzL0dhbWVzL1Byb2plY3RzL2lzZWthaS1jb3JlL25vZGVfbW9kdWxlcy9pc2VrYWkvU0tJTExTL0hUVFAvU0tJTExTL01ELmpzXCI7XG5yZXNbXCJNRFwiXSA9IGYxO1xuaW1wb3J0IGYyIGZyb20gXCIvVXNlcnMvR2FtZXMvUHJvamVjdHMvaXNla2FpLWNvcmUvbm9kZV9tb2R1bGVzL2lzZWthaS9TS0lMTFMvSFRUUC9TS0lMTFMvUkVQTFkuanNcIjtcbnJlc1tcIlJFUExZXCJdID0gZjI7XG5pbXBvcnQgZjMgZnJvbSBcIi9Vc2Vycy9HYW1lcy9Qcm9qZWN0cy9pc2VrYWktY29yZS9ub2RlX21vZHVsZXMvaXNla2FpL1NLSUxMUy9IVFRQL1NLSUxMUy9TVEFUSUMuanNcIjtcbnJlc1tcIlNUQVRJQ1wiXSA9IGYzO1xuZXhwb3J0IGRlZmF1bHQgcmVzOyIsImltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XHJcbmltcG9ydCBncmVlbmxvY2sgZnJvbSBcImdyZWVubG9jay1leHByZXNzXCI7XHJcbmltcG9ydCBodHRwIGZyb20gXCJodHRwXCI7XHJcblxyXG5pbXBvcnQgc3ViX3NraWxscyBmcm9tIFwiLi9TS0lMTFMvKi5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgKHtcclxuICAgIEVRVUlQXHJcbn0pID0+IFxyXG4gICAgRVFVSVAoe1xyXG4gICAgICAgIEhUVFA6ICh7XHJcbiAgICAgICAgICAgIEhUVFA6IHtcclxuICAgICAgICAgICAgICAgIHNzbCA9IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgcG9ydCA9IDgwODBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgU0VULFxyXG4gICAgICAgIH0pID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYXBwID0gZXhwcmVzcygpO1xyXG5cclxuICAgICAgICAgICAgaWYoc3NsKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWdyZWVUb3MsXHJcbiAgICAgICAgICAgICAgICAgICAgZW1haWwsXHJcbiAgICAgICAgICAgICAgICAgICAgYXBwcm92ZWREb21haW5zLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ0RpciA9IGB+Ly5jb25maWcvc3NsYCxcclxuICAgICAgICAgICAgICAgICAgICBjb21tdW5pdHlNZW1iZXIgPSBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICB0ZWxlbWV0cnkgPSBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBzc2xfcG9ydCA9IDQ0MyxcclxuICAgICAgICAgICAgICAgICAgICByZWRpcmVjdCA9IDgwXHJcbiAgICAgICAgICAgICAgICB9ID0gc3NsO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYoIWFncmVlVG9zIHx8ICFlbWFpbCB8fCAhYXBwcm92ZWREb21haW5zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm90X2ZpbGxlZCA9IE9iamVjdC5lbnRyaWVzKHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFncmVlVG9zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwcm92ZWREb21haW5zIFxyXG4gICAgICAgICAgICAgICAgICAgIH0pLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXIoKFsgLCB2YWx1ZSBdKSA9PiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlKS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwKChrZXkpID0+IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5KS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgam9pbihgIC0gYCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBZb3UndmUgZW5hYmxlZCBTU0wgYnV0IG5vdCBjb25maWd1cmVkIFNTTDogJHtub3RfZmlsbGVkfWApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGdyZWVubG9jay5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbGVtZXRyeSxcclxuICAgICAgICAgICAgICAgICAgICBhZ3JlZVRvcyxcclxuICAgICAgICAgICAgICAgICAgICBlbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICBjb25maWdEaXIsXHJcbiAgICAgICAgICAgICAgICAgICAgY29tbXVuaXR5TWVtYmVyLFxyXG4gICAgICAgICAgICAgICAgICAgIGFwcHJvdmVkRG9tYWlucyxcclxuICAgICAgICAgICAgICAgICAgICBhcHAsXHJcbiAgICAgICAgICAgICAgICB9KS5cclxuICAgICAgICAgICAgICAgICAgICBsaXN0ZW4oc3NsX3BvcnQsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFtIVFRQU11gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYEJJRlJPU1QgU0VDVVJFRGApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZihyZWRpcmVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlZGlyZWN0QXBwID0gZXhwcmVzcygpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgUmVkaXJlY3RpbmcgdG8gSFRUUCB0byBIVFRQU2ApO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHJlZGlyZWN0QXBwLmFsbChgKmAsIChyZXEsIHJlcykgPT4geyAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5yZWRpcmVjdChgaHR0cHM6Ly8ke3JlcS5oZWFkZXJzLmhvc3R9JHtyZXEudXJsfWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuZW5kKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaHR0cC5jcmVhdGVTZXJ2ZXIocmVkaXJlY3RBcHApLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0ZW4ocmVkaXJlY3QpO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYXBwLmxpc3Rlbihwb3J0LCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYOKaoO+4j1tIVFRQXeKaoO+4j2ApO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBCSUZST1NUIElOU0VDVVJFYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYExpc3RlbmluZyBvbiBodHRwOi8vbG9jYWxob3N0OjgwODBgKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBTRVQoe1xyXG4gICAgICAgICAgICAgICAgSFRUUDogYXBwXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sICAgIFxyXG4gICAgICAgIC4uLnN1Yl9za2lsbHNcclxuICAgIH0pO1xyXG4iLCJpbXBvcnQgaXNla2FpIGZyb20gXCJpc2VrYWlcIjtcclxuaXNla2FpLlNFVCh7XCJOT0RFXCI6e30sXCJIVFRQXCI6e1wicG9ydFwiOjgwODAsXCJTVEFUSUNcIjp7XCJwdWJsaWNcIjpcIi9cIn19LFwiTE9HXCI6e1wiZ3JlZXRpbmdzXCI6XCJIZWxsbywgc2VydmluZyAuL0RBVEEvcHVibGljIG9uIGh0dHA6Ly9sb2NhbGhvc3Q6ODA4MFwifX0pO1xyXG5cclxuaW1wb3J0IEhUVFAgZnJvbSBcIi4uL25vZGVfbW9kdWxlcy9pc2VrYWkvU0tJTExTL0hUVFAvbm9kZS5qc1wiO1xyXG5cbmlzZWthaS5FUVVJUCh7XHJcbiAgICBIVFRQLFxyXG59KTtcclxuIl0sIm5hbWVzIjpbInN1Yl9za2lsbHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUdBLFNBQWUsQ0FBQztJQUNaLElBQUk7SUFDSixHQUFHO0NBQ04sS0FBSztJQUNGLEdBQUcsQ0FBQztRQUNBLElBQUksRUFBRTtZQUNGLEdBQUcsSUFBSTtZQUNQLEdBQUcsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsQ0FBQztTQUNoQztLQUNKLENBQUMsQ0FBQztDQUNO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
